<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>M3 - Super charge visuals</title>
</head>
<body>
<button onclick="d()">Click</button>
<canvas id="canvas" width=600 height=300></canvas>
<script src="bin/debug/m3.js"></script>
<script>
    var canvas = document.getElementById('canvas');
    canvas.width = 600;
    canvas.height = 600;
    var context = canvas.getContext('2d');

    var array = [];
    for(var i=0;i<10;i++){
        array.push(Math.random());
    }

    function d() {
        var s = 400;
        function draw(){
            var surface = m3.ui.graphics.create(context, true);
            surface.wipe();
            context.clearRect(0, 0, canvas.width, canvas.height);

            var start = new Date().getTime();
            var colors = ['red', 'green', 'blue', 'yellow'];


            for (var i = 0; i < 1000; i += 1) {
                //graphics.drawCircle({x: i, y: i, r: 40, style: {stroke: colors[i % 4], fill: ''}});
                //graphics.drawRect({x: i, y: i, width: 50, height:50, style: {stroke: colors[i%4],fill:''}});
                surface.drawRoundRect({x:i,y:i,height:100, width:100,radiusTL:10,radiusTR:10,radiusBR:10,radiusBL:10,style:{fill:'',stroke: colors[i%  1]}});
            }
            surface.update();
            var end = new Date().getTime();
            console.log(end - start);

            /*s--;
            if(s>1) {
                window.requestAnimationFrame(function () {
                    draw();
                });
            }*/
        }
        window.requestAnimationFrame(function() {
            draw();
        });
    }
    function a(){
        var start = new Date().getTime();
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        m3.services.Thread.execute(backSort, [array],function(data) {
            var end = new Date().getTime();
            console.log(end - start);
            //console.log(data);
        });
        //backSort(array);
        //var end = new Date().getTime();
        //console.log(end - start);
    }

    function s(){
        var start = new Date().getTime();
        backSort(array);
        backSort(array);
        backSort(array);
        backSort(array);
        backSort(array);
        backSort(array);
        var end = new Date().getTime();
        console.log(end - start);
    }
    function backSort(arr){
        return arr.sort();
    }
    </script>
</body>
</html>